{"remainingRequest":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\babel-loader\\lib\\index.js!D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\src\\components\\common\\swiper\\Swiper.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\src\\components\\common\\swiper\\Swiper.vue","mtime":1622867448907},{"path":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622945952771},{"path":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\babel-loader\\lib\\index.js","mtime":1622945960944},{"path":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622945952771},{"path":"D:\\学习\\HBuilderX\\HBuilderXProject\\cloudmusic\\node_modules\\vue-loader\\lib\\index.js","mtime":1622945959391}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Swiper\",\n  props: {},\n  data: function data() {\n    return {\n      slideCount: 0,\n      interval: 3000,\n      imgWidth: 0,\n      //swiper每张图片的宽度一样\n      swiperStyle: {},\n      //利用swiper的style对象来控制着“过渡”\n      currentIndex: 1,\n      //记录当前滑动的下标\n      scrolling: false,\n      //当用手触摸和移动时,则暂停滚动\n      animalDuration: 300,\n      //切换一张图片0.3\n      showIndicator: true,\n      //当只有一张图片时，不显示小点点\n      playTimer: null,\n      //控制着计时器的开始与暂停\n      moveRatio: 0.25\n    };\n  },\n  methods: {\n    handleDom: function handleDom() {\n      var swiperEle = document.querySelector(\".swiper\");\n      var slideEles = document.getElementsByClassName(\"slide\");\n      this.slideCount = slideEles.length;\n      console.log(this.slideCount);\n\n      if (this.slideCount > 1) {\n        var cloneFirst = slideEles[0].cloneNode(true);\n        var cloneLast = slideEles[this.slideCount - 1].cloneNode(true);\n        swiperEle.insertBefore(cloneLast, slideEles[0]);\n        swiperEle.appendChild(cloneFirst);\n        console.log(slideEles);\n        this.imgWidth = swiperEle.offsetWidth;\n        this.swiperStyle = swiperEle.style;\n      } //显示第一张图片（不是刚刚从最后面添加到前面的那张）\n\n\n      this.setTransform(-this.imgWidth);\n    },\n    startTimer: function startTimer() {\n      var that = this;\n      this.playTimer = setInterval(function () {\n        that.currentIndex++;\n        that.scrollContent(-that.currentIndex * that.imgWidth); //使用过渡实现移动轮播图，效果更舒适\n      }, that.interval);\n    },\n    setTransform: function setTransform(movePosition) {\n      //控制着轮播图向左右移动\n      this.swiperStyle.transform = \"translateX(\".concat(movePosition, \"px)\");\n      this.swiperStyle[\"-webkit-transform\"] = \"translateX(\".concat(movePosition, \"px)\");\n      this.swiperStyle[\"-ms-transform\"] = \"translateX(\".concat(movePosition, \"px)\");\n    },\n    scrollContent: function scrollContent(position) {\n      this.scrolling = true; //滚动时不能用手滑动图片\n\n      this.swiperStyle.transition = \"transform \".concat(this.animalDuration, \"ms ease\");\n      this.setTransform(position);\n      this.checkPosition();\n      this.scrolling = false;\n    },\n    checkPosition: function checkPosition() {\n      //在确保“过渡”结束后再检查下标是否合理\n      var that = this;\n      setTimeout(function () {\n        that.swiperStyle.transition = \"0ms\";\n\n        if (that.currentIndex >= that.slideCount + 1) {\n          that.currentIndex = 1;\n          that.setTransform(-that.currentIndex * that.imgWidth); //当移动到最后一张，直接移动到第一张，不用过渡\n        } else if (that.currentIndex <= 0) {\n          that.currentIndex = that.slideCount;\n          that.setTransform(-that.currentIndex * that.imgWidth);\n        }\n      }, that.animalDuration);\n    },\n    touchStart: function touchStart(e) {\n      //如果图片正在滚动，则不能滑动图片\n      if (this.scrolling) return; //滑动时，暂停计时器\n\n      this.stopTimer();\n      this.startX = e.touches[0].pageX; //记录手指进入屏幕的距离，用于判断划痕的距离判断是否滑动图片\n    },\n    touchMove: function touchMove(e) {\n      this.currentX = e.touches[0].pageX;\n      this.distance = this.currentX - this.startX;\n      var currentPosition = -this.currentIndex * this.imgWidth;\n      var moveDistance = this.distance + currentPosition;\n      this.setTransform(moveDistance);\n    },\n    touchEnd: function touchEnd(e) {\n      var endDistance = Math.abs(this.distance); //取绝对值\n\n      var movePercentage = this.imgWidth * this.moveRatio; //当手指滑动到这个距离，则自动跳到下一张图片\n\n      if (this.distance === 0) {\n        return;\n      } else if (this.distance > 0 && endDistance > movePercentage) {\n        //this.distance>0 则说明手指向右滑\n        this.currentIndex--;\n      } else {\n        this.currentIndex++;\n      }\n\n      this.scrollContent(-this.currentIndex * this.imgWidth);\n      this.startTimer();\n    },\n    stopTimer: function stopTimer() {\n      clearInterval(this.playTimer);\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    //1.操作dom，在前后添加slide\n    setTimeout(function () {\n      _this.handleDom();\n\n      _this.startTimer();\n    }, 200);\n  }\n};",{"version":3,"sources":["Swiper.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"mySwiper\">\n    <div\n      class=\"swiper\"\n      @touchstart=\"touchStart\"\n      @touchmove=\"touchMove\"\n      @touchend=\"touchEnd\"\n    >\n      <slot></slot>\n    </div>\n\n    <div class=\"indicator\">\n      <div\n        class=\"indicatorItem\"\n        v-for=\"(item, index) in slideCount\"\n        :key=\"index\"\n        :class=\"{ active: index === currentIndex - 1 }\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Swiper\",\n  props: {},\n  data: function() {\n    return {\n      slideCount: 0,\n      interval: 3000,\n      imgWidth: 0, //swiper每张图片的宽度一样\n      swiperStyle: {}, //利用swiper的style对象来控制着“过渡”\n      currentIndex: 1, //记录当前滑动的下标\n      scrolling: false, //当用手触摸和移动时,则暂停滚动\n      animalDuration: 300, //切换一张图片0.3\n      showIndicator: true, //当只有一张图片时，不显示小点点\n      playTimer: null, //控制着计时器的开始与暂停\n      moveRatio: 0.25\n    };\n  },\n  methods: {\n    handleDom: function() {\n      let swiperEle = document.querySelector(\".swiper\");\n      let slideEles = document.getElementsByClassName(\"slide\");\n      this.slideCount = slideEles.length;\n      console.log(this.slideCount);\n      if (this.slideCount > 1) {\n        let cloneFirst = slideEles[0].cloneNode(true);\n        let cloneLast = slideEles[this.slideCount - 1].cloneNode(true);\n        swiperEle.insertBefore(cloneLast, slideEles[0]);\n        swiperEle.appendChild(cloneFirst);\n        console.log(slideEles);\n        this.imgWidth = swiperEle.offsetWidth;\n        this.swiperStyle = swiperEle.style;\n      }\n      //显示第一张图片（不是刚刚从最后面添加到前面的那张）\n      this.setTransform(-this.imgWidth);\n    },\n\n    startTimer: function() {\n      let that = this;\n      this.playTimer = setInterval(function() {\n        that.currentIndex++;\n        that.scrollContent(-that.currentIndex * that.imgWidth); //使用过渡实现移动轮播图，效果更舒适\n      }, that.interval);\n    },\n\n    setTransform: function(movePosition) {\n      //控制着轮播图向左右移动\n      this.swiperStyle.transform = `translateX(${movePosition}px)`;\n      this.swiperStyle[\"-webkit-transform\"] = `translateX(${movePosition}px)`;\n      this.swiperStyle[\"-ms-transform\"] = `translateX(${movePosition}px)`;\n    },\n\n    scrollContent: function(position) {\n      this.scrolling = true; //滚动时不能用手滑动图片\n      this.swiperStyle.transition = `transform ${this.animalDuration}ms ease`;\n      this.setTransform(position);\n      this.checkPosition();\n      this.scrolling = false;\n    },\n    checkPosition: function() {\n      //在确保“过渡”结束后再检查下标是否合理\n\n      let that = this;\n      setTimeout(function() {\n        that.swiperStyle.transition = \"0ms\";\n        if (that.currentIndex >= that.slideCount + 1) {\n          that.currentIndex = 1;\n          that.setTransform(-that.currentIndex * that.imgWidth); //当移动到最后一张，直接移动到第一张，不用过渡\n        } else if (that.currentIndex <= 0) {\n          that.currentIndex = that.slideCount;\n          that.setTransform(-that.currentIndex * that.imgWidth);\n        }\n      }, that.animalDuration);\n    },\n    touchStart: function(e) {\n      //如果图片正在滚动，则不能滑动图片\n      if (this.scrolling) return;\n      //滑动时，暂停计时器\n      this.stopTimer();\n      this.startX = e.touches[0].pageX; //记录手指进入屏幕的距离，用于判断划痕的距离判断是否滑动图片\n    },\n    touchMove: function(e) {\n      this.currentX = e.touches[0].pageX;\n      this.distance = this.currentX - this.startX;\n      let currentPosition = -this.currentIndex * this.imgWidth;\n      let moveDistance = this.distance + currentPosition;\n      this.setTransform(moveDistance);\n    },\n    touchEnd: function(e) {\n      let endDistance = Math.abs(this.distance); //取绝对值\n      let movePercentage = this.imgWidth * this.moveRatio; //当手指滑动到这个距离，则自动跳到下一张图片\n      if (this.distance === 0) {\n        return;\n      } else if (this.distance > 0 && endDistance > movePercentage) {\n        //this.distance>0 则说明手指向右滑\n        this.currentIndex--;\n      } else {\n        this.currentIndex++;\n      }\n      this.scrollContent(-this.currentIndex * this.imgWidth);\n      this.startTimer();\n    },\n    stopTimer: function() {\n      clearInterval(this.playTimer);\n    }\n  },\n  mounted: function() {\n    //1.操作dom，在前后添加slide\n    setTimeout(() => {\n      this.handleDom();\n      this.startTimer();\n    }, 200);\n  }\n}\n</script>\n\n<style scoped>\n* {\n  margin: 0px;\n  padding: 0px;\n}\n#mySwiper {\n  overflow: hidden;\n  position: relative;\n}\n\n.swiper {\n  display: flex;\n}\n.indicator {\n  display: flex;\n  position: absolute;\n  justify-content: center;\n  bottom: 12px;\n  width: 100%;\n}\n.indicatorItem {\n  width: 8px;\n  height: 8px;\n  margin: 5px 3px;\n  border-radius: 50%;\n  background-color: #fff;\n}\n.active {\n  background-color: rgba(212, 62, 46, 1);\n}\n</style>\n"],"sourceRoot":"src/components/common/swiper"}]}